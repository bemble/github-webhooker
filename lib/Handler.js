var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},events=require("events"),Request_1=require("./Request"),Repository_1=require("./Repository"),Handler=function(e){function t(){e.apply(this,arguments),this.repositories={}}return __extends(t,e),t.prototype.addRepository=function(e,t){this.repositories[e]=new Repository_1.Repository(e,t)},t.prototype.handle=function(e,t){var r=this,o="";e.on("data",function(e){o+=e}),e.on("end",function(){var t=new Request_1.Request(e.headers,o),n=r.repositories[t.getRepositoryName()];if(n&&n.isSignatureValid(t)){var i=t.getEvent(),s={name:i,request:e,repository:n};r.emit(i,s),r.emit("*",s)}}),t.writeHead(200),t.end()},t}(events.EventEmitter);exports.Handler=Handler;